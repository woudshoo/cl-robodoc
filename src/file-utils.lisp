(in-package #:cl-robodoc)

(defun parse-namestring-as-directory (string)
  "Returns a pathname assuming the string indentifies a directory.
This is basically the same as calling `pathname', 
however it will do some magic if the argument is something like:

   \"/tmp/A\"
or 
   \"/tmp/A.b\"

Because the default implementation assumes that A or A.b are a file name or
a file and type."
  (let* ((namestring (pathname string))
	 (name (pathname-name namestring))
	 (type (pathname-type namestring)))
    (if (or name type)
	(merge-pathnames
	 (make-pathname :directory `(:relative ,(format nil "窿窿ㄥ铙躜瀛扉篝钺礤ㄥ铙躜瀛扉篝豉疱┅┅磲脲疳翳钺礤侯犴铋呼疱铋轰彐狨祠钺礤篝蜷铉┅钺礤篝蜷铉┅ㄤ彐躅梏盱骈戾钺礤ㄤ轵钺礤⒁弭躜铙疳翳钺礤蝈痱弩孱糸铉骈戾鏖翳钺礤瘟团轭溟蝈泗矧纳鏖翳豉疱仍吞礤蜱瀛疳翳钺礤磲脲疳翳钺礤侯犴钺礤呼疱㈣繇膦疳蝮瀛钺礤篝蜷铉狍溟蝈泗矧溟颟┅ㄤ彐躅磲瓠钺礤钺礤箫躜沐翎蜱弭⑸囝犴濮轶疳翳钺礤麒殂轶祜汜翦轭箫躜沐溟蝈泗矧囿秕蜚濮泸遽翦疳翳钺礤轭翳圄狎珏臾溟蝈泗矧女绠钺礤岑獐惘浏瀹娆箫躜沐岑猬翎蜱弭浇骄惘浏瀹戾舄è箫躜沐钺礤礤蜱瀛疳翳钺礤钺礤箫躜沐┅箫躜沐钺礤豉疱磲脲疳翳钺礤侯犴疳翳钺礤钺礤箫躜沐钺礤呼疱疳翳钺礤豉疱箫躜沐钺礤┅箫躜沐钺礤溟蝮疳翳钺礤溟蝈泗矧箫躜沐钺礤┅箫躜沐溟蝮疳翳钺礤溟蝈泗矧箫躜沐┅篝狎舡痫轭箦狎汨箫躜沐溟蝮箫躜沐钺礤溟蝮呼弩＇羼踽祓烘蝻憝孱舂趑ㄡ篌弪篝狎舡痫轭箫躜沐溟蝮箫躜沐钺礤溟蝮⒂暮游暮英箫躜沐溟蝮箫躜沐钺礤溟蝮┅铄鳝溟蝮篚怏羼箫躜沐钺礤溟蝮ǐ篝狎舡痫轭戾铉翳箫躜沐溟蝮┅┅礤蜱瀛疳翳钺礤箫躜沐钺礤豉疱礤蜱瀛疳翳钺礤磲脲疳翳钺礤轰轵邈麸蝙ㄣ镱候屐狒轹铄鳝溟蝮┅翎蜱弭┅┅ㄤ彐躅泔瘗溟蝈泗矧蝈沲蝮轹屐箫躜沐溟翎蜱弭溟颟⒄糸扉豉骢钽糸镱麒殂泔痖弩骈戾蝈沲蝮轹屐骝镯囿秕蜚瀛溟颛麸圄狎珏舡溟颛烷篌轭溟蝈泗矧殄狎泸遽翦洚ㄣ飙驷浜麽祀溟蝈泗矧箫躜沐溟灬礅溽ㄦ瞟麒孱疳翳钺礤钺礤骖戾è翎蜱弭钺礤磲瓠钺礤骖箫躜沐溟翎蜱弭溟颟┅ㄥ铙躜瀛溟蝈泗矧殄蟓屮轶翎蜱弭钺礤ㄣ飙驷浜泔瘗骈戾骖翎蜱弭钺礤猴鲥蝼蜷翦舂┅轰轵邈麸蜷弩衡蝈徜翳骈蝮舂ㄤ彐躅蝈徜溟蝈泗矧狍翎颦鲥泗矧ㄤ轵邈麸蝙⒁弭躜铙狎蜥ㄥ翦蝾犰痱镧蜥砗蝓Ⅳ狎啜沔繇鸠翎碑翎颌芒溟蝈泗矧┅鏖翳镳孱骈戾篝蝈犴繇鸠翎碑翎颌哄戾礤铘豉疱Ж躅箝珙邃怡翦俯戾è翎颦箦聃孱沐磲脲狎蜥ㄦ殪瀛戾铉翳篝蝈犴哄戾礤铘豉疱Ж躅箝珙邃怡翦俯┅蝈徜箦聃孱沐翎颦箦聃孱沐篝蝈犴翎颦箦聃孱沐┅ㄤ彐躅屮趄徙舡蝈箫躜沐箫躜沐翎箫躜沐溟蝈泗矧翎蜱弭溟蝈泗矧⑿镳蹯狒弩翳圄狎珏舡溟蝈泗矧鏖翳彘翳弪翳囿秕蜚瀛翎颛泔铘孱矧翳囿秕蜚瀛溟蝈泗矧泔铘孱舢涉箴邈殒殄洮翳囿秕蜚瀛翎颛箬秕熹忮箦聃孱沐泔铘衢铋铉翳泔铘孱镦翎骈戾澡泔铘孱镦翳翎箦聃孱沐鏖祆忮屮趄徙翦狒翳翎蜱弭溟蝈泗矧涉囿秕蜚瀛翎颛轶铋翳泔溴鏖祆蝈沲蝮轹屐泔瘗翳泔铘孱镦囿秕蜚瀛溟蝈泗矧麸翳圄狎珏舡溟蝈泗矧М阵汜箦骘翳轶骢钽糸镱狎溴痨稆礤铘镦扉箴屮邈豸徕戾螽婶汜蝈徜轭翳泔铘孱镦篚痧矧骈戾轭鲥泗矧麒殂鏖祆忮筢鲥轭翳轫徵瀹澡蝓糸礤泔溴汜翳犷屮趄徙轸麒孱铄邃邃ㄩ箫躜沐翎黹铋躅翎蚝躅疳汶翎颦箦聃孱沐箫躜沐翎轰轵邈麸蝙翎蜱弭溟蝈泗矧ㄣ镳溟蝈泗矧蝈沲蝮轹屐箫躜沐溟蝈泗矧翎蜱弭溟蝈泗矧┅